/**
 * jQuery Markdown is a jQuery Plugin that provides necessary functions for a markdown editor
 *
 * jQuery Markdown provides necessary wrapper functions for a markdown editor so
 * anybody can create his/her own markdown editor using this plugin.
 *
 * jquery-markdown 1.1.0
 *
 * @author Can Geli≈ü (original) ca 2013
 * @author Key Bridge since 2018
 * @license License file must be attached with the source code (MIT License)
 * @see https://github.com/cangelis/jquery-markdown  (original)
 *
 * @since v2.0.0 created 03/02/19 add text formatting functions, tables
 */
$.fn.textReplace = function(e){var n, t = $.extend({selected:function(){return""}, no_selection:function(){return""}}, e), i = this.get(0), l = i.selectionStart, o = i.selectionEnd, u = $(this).val().substring(l, o); this.scrollTop; n = l === o?t.no_selection():t.selected(u), $(this).val($(this).val().substring(0, l) + n + $(this).val().substring(o)), $(this).focus(), $(this).prop("selectionStart", l), $(this).prop("selectionEnd", l + n.length)}, String.prototype.repeat = function(e){return new Array(e + 1).join(this)}, $.fn.mdBold = function(e){var n = $.extend({default:"bold"}, e); $(this).textReplace({selected:function(e){return"**" + e + "**"}, no_selection:function(){return"**" + n.default + "**"}})}, $.fn.mdItalic = function(e){var n = $.extend({default:"italic"}, e); $(this).textReplace({selected:function(e){return"_" + e + "_"}, no_selection:function(){return"_" + n.default + "_"}})}, $.fn.mdUnderline = function(e){var n = $.extend({default:"underline"}, e); $(this).textReplace({selected:function(e){return"++" + e + "++"}, no_selection:function(){return"++" + n.default + "++"}})}, $.fn.mdSuperscript = function(e){var n = $.extend({default:"super"}, e); $(this).textReplace({selected:function(e){return"^" + e + "^"}, no_selection:function(){return"^" + n.default + "^"}})}, $.fn.mdSubscript = function(e){var n = $.extend({default:"sub"}, e); $(this).textReplace({selected:function(e){return"~" + e + "~"}, no_selection:function(){return"~" + n.default + "~"}})}, $.fn.mdHighlight = function(e){var n = $.extend({default:"highlighted"}, e); $(this).textReplace({selected:function(e){return"==" + e + "=="}, no_selection:function(){return"==" + n.default + "=="}})}, $.fn.mdStrikethrough = function(e){var n = $.extend({default:"strikethrough"}, e); $(this).textReplace({selected:function(e){return"~~" + e + "~~"}, no_selection:function(){return"~~" + n.default + "~~"}})}, $.fn.mdHeader = function(e){var n = $.extend({default:"Heading", number:1}, e); $(this).textReplace({selected:function(e){return"\n" + "#".repeat(n.number) + " " + e + "\n"}, no_selection:function(){return"\n" + "#".repeat(n.number) + " " + n.default + "\n"}})}, $.fn.mdLink = function(e){var n = $.extend({default_text:"Link", default_url:"URL"}, e); $(this).textReplace({selected:function(e){return"[" + e + "](" + n.default_url + ")"}, no_selection:function(){return"[" + n.default_text + "](" + n.default_url + ")"}})}, $.fn.mdImage = function(e){var n = $.extend({default_alt_text:"", default_image_url:"Image URL", default_image_title:""}, e); $(this).textReplace({selected:function(e){return"![" + n.default_alt_text + "](" + e + ' "' + n.default_image_title + '")'}, no_selection:function(){return"![" + n.default_alt_text + "](" + n.default_image_url + ' "' + n.default_image_title + '")'}})}, $.fn.mdCodeInline = function(e){var n = $.extend({default:"inline code"}, e); $(this).textReplace({selected:function(e){if (lines = e.split("\n"), 1 === lines.length)return"`" + e + "`"; for (final_code = "", i = 0; i < lines.length; i++)final_code += "    " + lines[i] + "\n"; return final_code}, no_selection:function(){return"`" + n.default + "`"}})}, $.fn.mdCode = function(e){var n = $.extend({default:"Code block", language:"language"}, e); $(this).textReplace({selected:function(e){if (lines = e.split("\n"), 1 === lines.length)return"\n```" + n.language + "\n" + e + "\n```\n"; for (final_code = "\n```\n", i = 0; i < lines.length; i++)final_code += lines[i] + "\n"; return final_code += "\n```\n", final_code}, no_selection:function(){return"\n```" + n.language + "\n" + n.default + "\n```\n"}})}, $.fn.mdQuote = function(e){var n = $.extend({default:"Block quote"}, e); $(this).textReplace({selected:function(e){if (lines = e.split("\n"), 1 === lines.length)return"\n> " + e + "\n"; for (final_code = "\n", i = 0; i < lines.length; i++)final_code += "> " + lines[i] + "\n"; return final_code}, no_selection:function(){return"\n> " + n.default + "\n"}})}, $.fn.mdNumberedList = function(e){var n = $.extend({default:"Numbered list item"}, e); $(this).textReplace({selected:function(e){if (lines = e.split("\n"), 1 === lines.length)return"1. " + e + "\n"; for (final_code = "\n", i = 0; i < lines.length; i++)final_code += i + 1 + ". " + lines[i] + "\n"; return final_code += "\n", final_code}, no_selection:function(){return"1. " + n.default + "\n"}})}, $.fn.mdBulletList = function(e){var n = $.extend({default:"Bullet list item"}, e); $(this).textReplace({selected:function(e){if (lines = e.split("\n"), 1 === lines.length)return"- " + e + "\n"; for (final_code = "\n", i = 0; i < lines.length; i++)final_code += "- " + lines[i] + "\n"; return final_code += "\n", final_code}, no_selection:function(){return"- " + n.default + "\n"}})}, $.fn.mdFootnote = function(e){$.extend({default:"footnote"}, e); $(this).textReplace({selected:function(e){return e + "[^1]\n\n[^1] Footnote text\n\n"}, no_selection:function(){return"[^1]\n\n[^1] Footnote text\n\n"}})}, $.fn.mdHorizontalLine = function(e){$(this).textReplace({selected:function(e){return"\n---\n" + e}, no_selection:function(){return"\n---\n"}})}, $.fn.mdTable = function(e){$(this).textReplace({selected:function(e){for (lines = e.split("\n"), tbody = "", cellcount = 0, t = 0; t < lines.length; t++){line = lines[t], cells = line.split(","), cellcount = cells.length, tbody += "|"; for (var n = 0; n < cells.length; n++)tbody += " " + cells[n] + " |"; tbody += "\n"}thead = "|"; for (var t = 0; t < cellcount; t++)thead += "---|"; return thead + "\n" + tbody}, no_selection:function(){return"|---|---|---|\n| a | b | c |\n"}})}, $.fn.mdMacro = function(e){var n, t, i = this.get(0), l = i.selectionStart, o = i.selectionEnd, u = $(this).val().substring(l, o); this.scrollTop; $(this).focus(), l === o?(n = "<<<macroname>>>\n\n>>>macroname\nmacro text\n<<<\n", $(this).val($(this).val().substring(0, l) + n + $(this).val().substring(o)), $(this).prop("selectionStart", l), $(this).prop("selectionEnd", l + n.length)):(n = "<<<" + u + "Macro>>>", t = "\n\n>>>" + u + "Macro\nmacro content\n<<<\n", $(this).val($(this).val().substring(0, l) + n + $(this).val().substring(o) + t), $(this).prop("selectionStart", $(this).val().length - t.length), $(this).prop("selectionEnd", $(this).val().length))}, $.fn.mdInsert = function(e){var n = $.extend({default:"inserted"}, e); $(this).textReplace({selected:function(e){return"{+" + e + "+}"}, no_selection:function(){return"{+" + n.default + "+}"}})}, $.fn.mdDelete = function(e){var n = $.extend({default:"deleted"}, e); $(this).textReplace({selected:function(e){return"{-" + e + "-}"}, no_selection:function(){return"{-" + n.default + "-}"}})}, $.fn.mdEquationInline = function(e){var n = $.extend({default:"a^2 + b^2 = c^2"}, e); $(this).textReplace({selected:function(e){return"$`" + e + "`$"}, no_selection:function(){return"$`" + n.default + "`$"}})}, $.fn.mdEquation = function(e){var n = $.extend({default:"c = pmsqrt{a^2 + b^2}"}, e); $(this).textReplace({selected:function(e){return"\n```math\n" + e + "```\n"}, no_selection:function(){return"\n```math\n" + n.default + "\n```\n"}})}, $.fn.mdChart = function(e){var n = $.extend({default:"graph LR\n  A[Square Rect] -- Link text --\x3e B((Circle))\n  A --\x3e C(Round Rect)\n  B --\x3e D{Rhombus}\n  C --\x3e D"}, e); $(this).textReplace({selected:function(e){return"\n```mermaid\n" + e + "\n```\n"}, no_selection:function(){return"\n```mermaid\n" + n.default + "\n```\n"}})};

